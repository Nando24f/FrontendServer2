<!-- employee.component.html -->
<div class="container">
  <div class="sidebar">
    <h3>Seleccionar Calle</h3>
    <select [(ngModel)]="selectedStreet" (change)="onStreetChange()" class="street-select">
      <option *ngFor="let street of streets" [value]="street">
        {{ street }}
      </option>
    </select>
  </div>

  <div class="main-content">
    <div *ngIf="loading" class="loading">
      <i class="pi pi-spinner pi-spin"></i> Cargando datos...
    </div>

    <div *ngIf="!loading">
      <h2>Registro de Residentes - {{selectedStreet}}</h2>
      
      <div class="stats-card">
        <h3>Estadísticas de Residentes</h3>
        <div class="stats-grid">
          <div class="stat-item">
            <span class="stat-label">Total Residentes:</span>
            <span class="stat-value">{{totalResidents}}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Hombres:</span>
            <span class="stat-value">{{maleCount}}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Mujeres:</span>
            <span class="stat-value">{{femaleCount}}</span>
          </div>
        </div>
      </div>

      <div class="chart-container">
        <p-chart type="doughnut" [data]="chartData" [options]="chartOptions"></p-chart>
      </div>

      <div class="residents-list">
        <h3>Listado de Residentes ({{filteredResidents.length}})</h3>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Dirección</th>
                <th>RUT</th>
                <th>Género</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let resident of filteredResidents">
                <td>{{ resident.nombre }}</td>
                <td>{{ resident.apellido }}</td>
                <td>{{ resident.calle }} {{ resident.numero_casa }}</td>
                <td>{{ resident.rut  }}</td>
                <td>{{ resident.sexo }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>