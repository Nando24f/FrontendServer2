<h2>Consultas Avanzadas</h2>

<!-- Consulta por Usuario -->
<section>
  <h3>Alarmas por Usuario</h3>
  <input type="number" [(ngModel)]="usuarioId" placeholder="ID de Usuario" />
  <button (click)="consultarPorUsuario()">Buscar</button>
  <div *ngIf="alarmasPorUsuario.length">
    <table>
      <thead>
        <tr><th>ID</th><th>Categoría</th><th>Fecha</th><th>Estado</th></tr>
      </thead>
      <tbody>
        <tr *ngFor="let a of paginar(alarmasPorUsuario, paginaUsuario)">
          <td>{{ a.id }}</td>
          <td>{{ a.categoria }}</td>
          <td>{{ a.fecha }}</td>
          <td>{{ a.estado }}</td>
        </tr>
      </tbody>
    </table>
    <button (click)="anteriorUsuario()" [disabled]="paginaUsuario === 1">Anterior</button>
    <button (click)="siguienteUsuario()" [disabled]="paginaUsuario * tamanio >= alarmasPorUsuario.length">Siguiente</button>
  </div>
</section>

<!-- Consulta por Rango -->
<section>
  <h3>Alarmas por Rango de Fechas</h3>
  <input type="date" [(ngModel)]="fechaInicio" />
  <input type="date" [(ngModel)]="fechaFin" />
  <button (click)="consultarPorRango()">Buscar</button>
  <div *ngIf="alarmasPorRango.length">
    <table>
      <thead>
        <tr><th>ID</th><th>Categoría</th><th>Fecha</th><th>Estado</th></tr>
      </thead>
      <tbody>
        <tr *ngFor="let a of paginar(alarmasPorRango, paginaRango)">
          <td>{{ a.id }}</td>
          <td>{{ a.categoria }}</td>
          <td>{{ a.fecha }}</td>
          <td>{{ a.estado }}</td>
        </tr>
      </tbody>
    </table>
    <button (click)="anteriorRango()" [disabled]="paginaRango === 1">Anterior</button>
    <button (click)="siguienteRango()" [disabled]="paginaRango * tamanio >= alarmasPorRango.length">Siguiente</button>
  </div>
</section>

<!-- Críticas -->
<section>
  <h3>Alarmas Críticas No Resueltas</h3>
  <button (click)="consultarCriticas()">Cargar</button>
  <div *ngIf="alarmasCriticas.length">
    <table>
      <thead>
        <tr><th>ID</th><th>Categoría</th><th>Fecha</th><th>Estado</th></tr>
      </thead>
      <tbody>
        <tr *ngFor="let a of paginar(alarmasCriticas, paginaCriticas)">
          <td>{{ a.id }}</td>
          <td>{{ a.categoria }}</td>
          <td>{{ a.fecha }}</td>
          <td>{{ a.estado }}</td>
        </tr>
      </tbody>
    </table>
    <button (click)="anteriorCriticas()" [disabled]="paginaCriticas === 1">Anterior</button>
    <button (click)="siguienteCriticas()" [disabled]="paginaCriticas * tamanio >= alarmasCriticas.length">Siguiente</button>
  </div>
</section>

<!-- Resueltas -->
<section>
  <h3>Alarmas Resueltas Últimos 7 Días</h3>
  <button (click)="consultarResueltas()">Cargar</button>
  <div *ngIf="alarmasResueltas.length">
    <table>
      <thead>
        <tr><th>ID</th><th>Categoría</th><th>Fecha</th><th>Estado</th></tr>
      </thead>
      <tbody>
        <tr *ngFor="let a of paginar(alarmasResueltas, paginaResueltas)">
          <td>{{ a.id }}</td>
          <td>{{ a.categoria }}</td>
          <td>{{ a.fecha }}</td>
          <td>{{ a.estado }}</td>
        </tr>
      </tbody>
    </table>
    <button (click)="anteriorResueltas()" [disabled]="paginaResueltas === 1">Anterior</button>
    <button (click)="siguienteResueltas()" [disabled]="paginaResueltas * tamanio >= alarmasResueltas.length">Siguiente</button>
  </div>
</section>
